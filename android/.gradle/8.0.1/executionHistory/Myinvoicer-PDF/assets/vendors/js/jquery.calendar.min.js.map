{"version":3,"file":"jquery.calendar.min.js","sources":["jquery.calendar.min.js"],"sourcesContent":["// the semi-colon before function invocation is a safety net against concatenated\n// scripts and/or other plugins which may not be closed properly.\n;(function ($, window, document, undefined) {\n\n  \"use strict\";\n\n  // Create the defaults once\n  var pluginName = \"simpleCalendar\",\n    defaults = {\n      months: ['january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'], //string of months starting from january\n      days: ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'], //string of days starting from sunday\n      displayYear: true, // display year in header\n      fixedStartDay: true, // Week begin always by monday or by day set by number 0 = sunday, 7 = saturday, false = month always begin by first day of the month\n      displayEvent: true, // display existing event\n      disableEventDetails: false, // disable showing event details\n      disableEmptyDetails: false, // disable showing empty date details\n      events: [], // List of event\n      onInit: function (calendar) {}, // Callback after first initialization\n      onMonthChange: function (month, year) {}, // Callback on month change\n      onDateSelect: function (date, events) {}, // Callback on date selection\n      onEventSelect: function () {},              // Callback fired when an event is selected     - see $(this).data('event')\n      onEventCreate: function( $el ) {},          // Callback fired when an HTML event is created - see $(this).data('event')\n      onDayCreate:   function( $el, d, m, y ) {}  // Callback fired when an HTML day is created   - see $(this).data('today'), .data('todayEvents')\n    };\n\n  // The actual plugin constructor\n  function Plugin(element, options) {\n    this.element = element;\n    this.settings = $.extend({}, defaults, options);\n    this._defaults = defaults;\n    this._name = pluginName;\n    this.currentDate = new Date();\n    this.init();\n  }\n\n  // Avoid Plugin.prototype conflicts\n  $.extend(Plugin.prototype, {\n    init: function () {\n      var container = $(this.element);\n      var todayDate = this.currentDate;\n\n      var calendar = $('<div class=\"calendar\"></div>');\n      var header = $('<header>' +\n        '<h2 class=\"month\"></h2>' +\n        '<a class=\"simple-calendar-btn btn-prev\" href=\"#\"></a>' +\n        '<a class=\"simple-calendar-btn btn-next\" href=\"#\"></a>' +\n        '</header>');\n\n      this.updateHeader(todayDate, header);\n      calendar.append(header);\n\n      this.buildCalendar(todayDate, calendar);\n      container.append(calendar);\n\n      this.bindEvents();\n      this.settings.onInit(this);\n    },\n\n    //Update the current month header\n    updateHeader: function (date, header) {\n      var monthText = this.settings.months[date.getMonth()];\n      monthText += this.settings.displayYear ? ' <div class=\"year\">' + date.getFullYear() : '</div>';\n      header.find('.month').html(monthText);\n    },\n\n    //Build calendar of a month from date\n    buildCalendar: function (fromDate, calendar) {\n      var plugin = this;\n\n      calendar.find('table').remove();\n\n      var body = $('<table></table>');\n      var thead = $('<thead></thead>');\n      var tbody = $('<tbody></tbody>');\n\n      //setting current year and month\n      var y = fromDate.getFullYear(), m = fromDate.getMonth();\n\n      //first day of the month\n      var firstDay = new Date(y, m, 1);\n      //last day of the month\n      var lastDay = new Date(y, m + 1, 0);\n      // Start day of weeks\n      var startDayOfWeek = firstDay.getDay();\n\n      if (this.settings.fixedStartDay !== false) {\n        // Backward compatibility\n        startDayOfWeek =  this.settings.fixedStartDay === true ? 1 : this.settings.fixedStartDay;\n\n        // If first day of month is different of startDayOfWeek\n        while (firstDay.getDay() !== startDayOfWeek) {\n          firstDay.setDate(firstDay.getDate() - 1);\n        }\n        // If last day of month is different of startDayOfWeek + 7\n        while (lastDay.getDay() !== ((startDayOfWeek + 6) % 7)) {\n          lastDay.setDate(lastDay.getDate() + 1);\n        }\n      }\n\n      //Header day in a week ( (x to x + 7) % 7 to start the week by monday if x = 1)\n      for (var i = startDayOfWeek; i < startDayOfWeek + 7; i++) {\n        thead.append($('<td>' + this.settings.days[i % 7].substring(0, 3) + '</td>'));\n      }\n\n      //For firstDay to lastDay\n      for (var day = firstDay; day <= lastDay; day.setDate(day.getDate())) {\n        var tr = $('<tr></tr>');\n        //For each row\n        for (var i = 0; i < 7; i++) {\n          var td = $('<td><div class=\"day\" data-date=\"' + day.toISOString() + '\">' + day.getDate() + '</div></td>');\n\n          var $day = td.find('.day');\n\n          //if today is this day\n          if (day.toDateString() === (new Date).toDateString()) {\n            $day.addClass(\"today\");\n          }\n\n          //if day is not in this month\n          if (day.getMonth() != fromDate.getMonth()) {\n            $day.addClass(\"wrong-month\");\n          }\n\n          // filter today's events\n          var todayEvents = plugin.getDateEvents(day);\n\n          if (todayEvents.length && plugin.settings.displayEvent) {\n            $day.addClass(plugin.settings.disableEventDetails ? \"has-event disabled\" : \"has-event\");\n          } else {\n            $day.addClass(plugin.settings.disableEmptyDetails ? \"disabled\" : \"\");\n          }\n\n          // associate some data available from the onDayCreate callback\n          $day.data( 'todayEvents', todayEvents );\n\n          // simplify further customization\n          this.settings.onDayCreate( $day, day.getDate(), m, y );\n\n          tr.append(td);\n          day.setDate(day.getDate() + 1);\n        }\n        tbody.append(tr);\n      }\n\n      body.append(thead);\n      body.append(tbody);\n\n      var eventContainer = $('<div class=\"event-container\"><div class=\"close\"></div><div class=\"event-wrapper\"></div></div>');\n\n      calendar.append(body);\n      calendar.append(eventContainer);\n    },\n    changeMonth: function (value) {\n      this.currentDate.setMonth(this.currentDate.getMonth() + value, 1);\n      this.buildCalendar(this.currentDate, $(this.element).find('.calendar'));\n      this.updateHeader(this.currentDate, $(this.element).find('.calendar header'));\n      this.settings.onMonthChange(this.currentDate.getMonth(), this.currentDate.getFullYear())\n    },\n    //Init global events listeners\n    bindEvents: function () {\n      var plugin = this;\n\n      //Remove previously created events\n      $(plugin.element).off();\n\n      //Click previous month\n      $(plugin.element).on('click', '.btn-prev', function ( e ) {\n        plugin.changeMonth(-1)\n        e.preventDefault();\n      });\n\n      //Click next month\n      $(plugin.element).on('click', '.btn-next', function ( e ) {\n        plugin.changeMonth(1);\n        e.preventDefault();\n      });\n\n      //Binding day event\n      $(plugin.element).on('click', '.day', function (e) {\n        var date = new Date($(this).data('date'));\n        var events = plugin.getDateEvents(date);\n        if (!$(this).hasClass('disabled')) {\n          plugin.fillUp(e.pageX, e.pageY);\n          plugin.displayEvents(events);\n        }\n        plugin.settings.onDateSelect(date, events);\n      });\n\n      //Binding event container close\n      $(plugin.element).on('click', '.event-container .close', function (e) {\n        plugin.empty(e.pageX, e.pageY);\n      });\n    },\n    displayEvents: function (events) {\n      var plugin = this;\n      var container = $(this.element).find('.event-wrapper');\n\n      events.forEach(function (event) {\n        var startDate = new Date(event.startDate);\n        var endDate = new Date(event.endDate);\n        var $event = $('' +\n          '<div class=\"event\">' +\n          ' <div class=\"event-hour\">' + startDate.getHours() + ':' + (startDate.getMinutes() < 10 ? '0' : '') + startDate.getMinutes() + '</div>' +\n          ' <div class=\"event-date\">' + plugin.formatDateEvent(startDate, endDate) + '</div>' +\n          ' <div class=\"event-summary\">' + event.summary + '</div>' +\n          '</div>');\n\n        $event.data( 'event', event );\n        $event.click( plugin.settings.onEventSelect );\n\n        // simplify further customization\n        plugin.settings.onEventCreate( $event );\n\n        container.append($event);\n      })\n    },\n    addEvent: function(newEvent) {\n      var plugin = this;\n      // add the new event to events list\n      plugin.settings.events = [...plugin.settings.events, newEvent]\n      this.buildCalendar(this.currentDate, $(this.element).find('.calendar'));\n    },\n    setEvents: function(newEvents) {\n      var plugin = this;\n      // add the new event to events list\n      plugin.settings.events = newEvents\n      this.buildCalendar(this.currentDate, $(this.element).find('.calendar'));\n    },\n    //Small effect to fillup a container\n    fillUp: function (x, y) {\n      var plugin = this;\n      var elem = $(plugin.element);\n      var elemOffset = elem.offset();\n\n      var filler = $('<div class=\"filler\" style=\"\"></div>');\n      filler.css(\"left\", x - elemOffset.left);\n      filler.css(\"top\", y - elemOffset.top);\n\n      elem.find('.calendar').append(filler);\n\n      filler.animate({\n        width: \"300%\",\n        height: \"300%\"\n      }, 500, function () {\n        elem.find('.event-container').show();\n        filler.hide();\n      });\n    },\n    //Small effect to empty a container\n    empty: function (x, y) {\n      var plugin = this;\n      var elem = $(plugin.element);\n      var elemOffset = elem.offset();\n\n      var filler = elem.find('.filler');\n      filler.css(\"width\", \"300%\");\n      filler.css(\"height\", \"300%\");\n\n      filler.show();\n\n      elem.find('.event-container').hide().find('.event').remove();\n\n      filler.animate({\n        width: \"0%\",\n        height: \"0%\"\n      }, 500, function () {\n        filler.remove();\n      });\n    },\n    getDateEvents: function (d) {\n      var plugin = this;\n      return plugin.settings.events.filter(function (event) {\n        return plugin.isDayBetween(new Date(d), new Date(event.startDate), new Date(event.endDate));\n      });\n    },\n    isDayBetween: function (d, dStart, dEnd) {\n      dStart.setHours(0,0,0);\n      dEnd.setHours(23,59,59,999);\n      d.setHours(12,0,0);\n\n      return dStart <= d && d <= dEnd;\n    },\n    formatDateEvent: function (dateStart, dateEnd) {\n      var formatted = '';\n      formatted += this.settings.days[dateStart.getDay()] + ' - ' + dateStart.getDate() + ' ' + this.settings.months[dateStart.getMonth()].substring(0, 3);\n\n      if (dateEnd.getDate() !== dateStart.getDate()) {\n        formatted += ' to ' + dateEnd.getDate() + ' ' + this.settings.months[dateEnd.getMonth()].substring(0, 3)\n      }\n      return formatted;\n    }\n  });\n\n  // A really lightweight plugin wrapper around the constructor,\n  // preventing against multiple instantiations\n  $.fn[pluginName] = function (options) {\n    return this.each(function () {\n      if (!$.data(this, \"plugin_\" + pluginName)) {\n        $.data(this, \"plugin_\" + pluginName, new Plugin(this, options));\n      }\n    });\n  };\n})(jQuery, window, document);\n"],"names":["$","pluginName","defaults","months","days","displayYear","fixedStartDay","displayEvent","disableEventDetails","disableEmptyDetails","events","onInit","calendar","onMonthChange","month","year","onDateSelect","date","onEventSelect","onEventCreate","$el","onDayCreate","d","m","y","Plugin","element","options","this","settings","extend","_defaults","_name","currentDate","Date","init","prototype","container","todayDate","header","updateHeader","append","buildCalendar","bindEvents","monthText","getMonth","getFullYear","find","html","fromDate","plugin","body","remove","thead","tbody","firstDay","lastDay","startDayOfWeek","getDay","setDate","getDate","i","substring","day","tr","td","toISOString","$day","todayEvents","toDateString","addClass","getDateEvents","length","data","eventContainer","changeMonth","value","setMonth","off","on","e","preventDefault","hasClass","fillUp","pageX","pageY","displayEvents","empty","forEach","event","startDate","endDate","$event","getHours","getMinutes","formatDateEvent","summary","click","addEvent","newEvent","setEvents","newEvents","x","elem","elemOffset","offset","filler","css","left","top","animate","width","height","show","hide","filter","isDayBetween","dStart","dEnd","setHours","dateStart","dateEnd","formatted","fn","each","jQuery","window","document"],"mappings":"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"}